{# Purpose of this template: Display a menu of pages #}
<div class="content-block content-menu{% if vars.navType == 3 %} navbar navbar-default{% endif %}">
{% if items|length > 0 %}
    <ul{% if vars.navType > 0 %} class="nav {% if vars.navType in [1, 3] %}nav-tabs{% elseif vars.navType == 2 %}nav-pills{% endif %}"{% endif %}>
        {% for page in items if zikulacontentmodule_hasReadAccess(page) %}
            {% set pageTitle = page|zikulacontentmodule_formattedTitle %}
            {% set isActivePage = zikulacontentmodule_isCurrentPage(page) %}
            {% if vars.subPagesHandling|default == 'hide' or page.children|length < 1 %}
                <li role="presentation"{% if isActivePage %} class="active"{% endif %}>
                    <a href="{{ path('zikulacontentmodule_page_display', {slug: page.slug}) }}" title="{{ pageTitle|e('html_attr') }}">{{ pageTitle }}</a>
                </li>
            {% elseif vars.subPagesHandling|default == 'dropdown' %}
                <li role="presentation" class="dropdown{% if isActivePage %} active{% endif %}">
                    <a href="#" title="{{ pageTitle|e('html_attr') }}" class="dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">{{ pageTitle }} <span class="caret"></span></a>
                    {{ include('@ZikulaContentModule/Block/pageListInclude.html.twig', {pages: page.children, context: 'menuBlock', includeSelf: true}) }}
                </li>
            {% endif %}
        {% endfor %}
    </ul>
{% else %}
    <p>{{ __('No pages found.') }}</p>
{% endif %}
</div>
