TODO
{ajaxheader modname='Content'}

<script type="text/javascript" 
    src="http://maps.google.com/maps/api/js?v=3&language={$language}&sensor=false">
</script>

<div class="content-googlemap">
    <div id="googlemap" class="map" style="width: 100%; height: 400px"></div>
</div>

<script type="text/javascript">
    //<![CDATA[
    Event.observe(window, 'load',
        function() { 
            {{if !empty($latitude) AND !empty($longitude)}}
            var myLatlng = new google.maps.LatLng({{$latitude|safetext}}, {{$longitude|safetext}});
            {{else}}
            var myLatlng = new google.maps.LatLng(54.336869, 10.119942);
            {{/if}}
            var myMapOptions = { 
                zoom: {{if !empty($zoom)}}{{$zoom|safetext}}{{else}}5{{/if}},
                center: myLatlng, 
                scaleControl: true,
                mapTypeId: google.maps.MapTypeId.ROADMAP,
            }; 
            var map = new google.maps.Map($('googlemap'), myMapOptions); 
            
            // add a marker to the map
            var marker = new google.maps.Marker({ 
                position: myLatlng,
                map: map
            });
            
            google.maps.event.addListener(map, 'click', function(event) { 
                marker.setMap(null);
                marker = null;
                marker = new google.maps.Marker({ 
                    position: event.latLng,
                    map: map
                });
                map.setCenter(event.latLng);
                coord = event.latLng.toString();
                coord = coord.split(", ");
                latitude = coord[0].replace(/\(/, "");
                longitude = coord[1].replace(/\)/, "");
                $('latitude').value = latitude;
                $('longitude').value = longitude;
                $('zoom').value = map.getZoom();
            });
        }
    );
    //]]>
</script>

<p>{gt text="Select a geographical position either by clicking on the map or writing the position (latitude and longitude) directly. You can drag the map with your mouse, and double-click to zoom and select position."}</p>

<div class="z-formrow">
    {formlabel for='latitude' __text='Latitude'}
    {formtextinput id='latitude' group='data' mandatory='1' maxLength='30'}
    {contentlabelhelp __text='(a comma-separated numeral that has a precision to 6 decimal places. For example, 40.714728)'}
</div>

<div class="z-formrow">
    {formlabel for='longitude' __text='Longitude'}
    {formtextinput id='longitude' group='data' mandatory='1' maxLength='30'}
    {contentlabelhelp __text='(a comma-separated numeral that has a precision to 6 decimal places. For example, 40.714728)'}
</div>

<div class="z-formrow">
    {formlabel for='zoom' __text='Zoom level'}
    {formtextinput id='zoom' group='data' mandatory='1' maxLength='30'}
    {contentlabelhelp __text='(from 0 for the entire world to 21 for individual buildings)'}
</div>

<div class="z-formrow">
    {formlabel for='addressText' __text='The target address'}
    {formtextinput id='addressText' group='data' maxLength='255'}
</div>

<div class="z-formrow">
    {formlabel for='topText' __text='Header to be shown above the map'}
    {formtextinput id='topText' group='data' maxLength='255'}
</div>

<div class="z-formrow">
    {formlabel for='bottomText' __text='Text to be shown below the map'}
    {formtextinput id='bottomText' textMode='multiline' group='data' cols='60' rows='8'}
</div>
