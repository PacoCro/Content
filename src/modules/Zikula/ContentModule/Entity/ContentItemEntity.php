<?php
/**
 * Content.
 *
 * @copyright Axel Guckelsberger (Zikula)
 * @license http://www.gnu.org/licenses/lgpl.html GNU Lesser General Public License
 * @author Axel Guckelsberger <info@ziku.la>.
 * @link https://ziku.la
 * @version Generated by ModuleStudio 1.3.2 (https://modulestudio.de).
 */

namespace Zikula\ContentModule\Entity;

use Zikula\ContentModule\Entity\Base\AbstractContentItemEntity as BaseEntity;
use Doctrine\ORM\Mapping as ORM;
use Gedmo\Mapping\Annotation as Gedmo;

/**
 * Entity class that defines the entity structure and behaviours.
 *
 * This is the concrete entity class for content item entities.
 * @Gedmo\TranslationEntity(class="Zikula\ContentModule\Entity\ContentItemTranslationEntity")
 * @ORM\Entity(repositoryClass="Zikula\ContentModule\Entity\Repository\ContentItemRepository")
 * @ORM\Table(name="zikula_content_contentitem",
 *     indexes={
 *         @ORM\Index(name="activeindex", columns={"active"}),
 *         @ORM\Index(name="workflowstateindex", columns={"workflowState"})
 *     }
 * )
 */
class ContentItemEntity extends BaseEntity
{
    /**
     * Checks whether this content item is currently active or not.
     *
     * @return boolean
     */
    public function isCurrentlyActive()
    {
        if (!$this->getActive()) {
            return false;
        }

        $now = new \DateTime();
        if (null !== $this->getActiveFrom() && $this->getActiveFrom() > $now) {
            return false;
        }
        if (null !== $this->getActiveTo() && $this->getActiveTo() < $now) {
            return false;
        }

        return true;
    }
}
